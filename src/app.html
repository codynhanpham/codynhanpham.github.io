<!doctype html>
<html lang="%paraglide.lang%" data-theme="default">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/assets/logo/variants/logo-0.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link href="/assets/fonts/Cherish-Regular.ttf" rel="prefetch" type="font/ttf" />
		<meta name="theme-color" content="#fafaf9" />
		<meta name="theme-color" content="#1c1917" media="(prefers-color-scheme: dark)" />

		<script>
			// Some initial theme setup to avoid flash of incorrect theme on page load
			(function() {
				try {
					const mode = localStorage.getItem('mode-watcher-mode');
					const system = window.matchMedia('(prefers-color-scheme: dark)').matches;
					const is = (val, target) => val === target || val === `"${target}"`;
					let shouldBeDark = true; // Default to dark. Who even uses light mode?
					if (is(mode, 'light')) {
						shouldBeDark = false;
					} else if (is(mode, 'system')) {
						shouldBeDark = system;
					} else if (is(mode, 'dark')) {
						shouldBeDark = true;
					} else {
						shouldBeDark = true;
					}
					if (shouldBeDark) {
						document.documentElement.classList.add('dark');
					} else {
						document.documentElement.classList.remove('dark');
					}
				} catch (e) {
					console.warn('Initial theme setup error:', e);
				}
			})();
		</script>

		<style>
			/* Just some general defaults that look good for light and dark mode before the full theme loads */
			/* This hopefully avoids a flash of unstyled content / mismatch color theme */
			:root {
				--background: oklch(1 0 0);
				--sidebar: oklch(0.985 0.001 106.423);
				--foreground: oklch(0.147 0.004 49.25);
			}
			.dark {
				--background: oklch(0.147 0.004 49.25);
				--sidebar: oklch(0.216 0.006 56.043);
				--foreground: oklch(0.985 0.001 106.423);
			}
			html, body {
				background-color: var(--sidebar);
				color: var(--foreground);
			}
		</style>


		<!-- FONTS -->
		<link
			rel="preload"
			href="%sveltekit.assets%/assets/fonts/NotoSans-VariableFont_wdth,wght.ttf"
			as="font"
			type="font/ttf"
			crossorigin="anonymous"
			fetchpriority="auto"
		/>
		<link
			rel="preload"
			href="%sveltekit.assets%/assets/fonts/NotoSans-Italic-VariableFont_wdth,wght.ttf"
			as="font"
			type="font/ttf"
			crossorigin="anonymous"
			fetchpriority="low"
		/>

		<!-- APPLE THINGS -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
